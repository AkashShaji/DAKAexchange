{% extends 'base.html' %}
{% block content %}

<div class="row profile-top">
    <div class="col-md-4">
        {{ image }}
    </div>
    <div class="col-md-4">
        <h2>{{ user.name }}</h2>
        {{ user.email }}
    </div>
    <div class="col-md-4">
      <a href="{{ url_for('edit_profile', user_id=user.id) }}">
        <button type="button" class="btn btn-primary">Edit Profile</button>
      </a>
    </div>
</div>

<div class="row profile-body">
    <div class="col-md-4">
        Selling Hours:<br>
        {{ user.start_time.time }} to {{ user.end_time.time }}
    </div>
    <div class="w-100" ></div>
    <div class="col-md-4">
        Swipes Left:<br>
        {{ user.swipe_count }}
    </div>
    <div class="w-100"></div>
    <div class="col-md-4">
        Swipe Price:<br>
        ${{ user.swipe_price}}
    </div>

    <span id="transcations"></span>

    <script type="text/javascript">
        $(document).ready(function() {
            $.getJSON($SCRIPT_ROOT + "/getTransactions", {
                userID: $USER_ID
            }, function (data) {
                var transactions = '';
                if(data.length === 0) {
                    transactions = "<div class='col'>" +
                        "<div class='text-center'>No transactions available!</div>" +
                        "</div>"
                }
                else {
                    for(var i = 0; i < data.length; i++) {
                        transactions += "<div class='row'>" +
                            "<div class='col-4'>" + data[i][0] + "</div>" +
                            "<div class='col-4'> a swipe for </div> " +
                            "<div class='col-4'>" + data[i][1] + "</div></div>" +
                            "<div class='w-100'></div> ";
                    }
                }
                $('#transcations').html(transactions);
            });
        });
    </script>
</div>



{% endblock %}
